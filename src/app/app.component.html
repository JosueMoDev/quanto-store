<ion-app>
  @if(userAuthenticated){
  <ion-header>
    <ion-toolbar>
      <ion-buttons slot="start">
        <ion-menu-toggle menu="left-menu">
          <ion-button><ion-icon name="menu-outline"></ion-icon></ion-button>
        </ion-menu-toggle>
      </ion-buttons>
      <ion-title>Quanto</ion-title>
      <ion-buttons slot="end">
        <ion-button>
          {{ userAuthenticated.displayName || userAuthenticated.email }}
        </ion-button>
        <ion-button (click)="logout()">
          <ion-icon name="log-out-outline"></ion-icon>
        </ion-button>

        <ion-menu-toggle menuId="end-menu"> </ion-menu-toggle>
        <ion-menu-toggle menu="right-menu">
          <ion-button>
            <ion-icon name="cart-outline"></ion-icon>
            @if(checkoutDetails.cartCounter){
            <ion-badge
              color="danger"
              style="position: absolute; top: -10px; right: -10px"
            >
              {{ checkoutDetails.cartCounter }}
            </ion-badge>
            }
          </ion-button>
        </ion-menu-toggle>
      </ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-menu side="start" menuId="left-menu" contentId="main-content">
    <ion-header>
      <ion-toolbar>
        <ion-title>Menu</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content>
      <ion-list id="inbox-list">
        <ion-list-header>Home</ion-list-header>
        @for (page of appPages; track $index) {
        <ion-menu-toggle auto-hide="false">
          <ion-item
            routerDirection="root"
            [routerLink]="[page.url]"
            lines="none"
            detail="false"
            routerLinkActive="selected"
          >
            <ion-icon
              aria-hidden="true"
              slot="start"
              [ios]="page.icon + '-outline'"
              [md]="page.icon + '-sharp'"
            ></ion-icon>
            <ion-label>{{ page.title }}</ion-label>
          </ion-item>
        </ion-menu-toggle>
        }
      </ion-list>
    </ion-content>
  </ion-menu>
  <ion-menu side="end" menuId="right-menu" contentId="main-content">
    <ion-header>
      <ion-toolbar>
        <ion-title>Cart Items</ion-title>
      </ion-toolbar>
    </ion-header>
    <ion-content>
      <app-product-cart></app-product-cart>
    </ion-content>
    <ion-footer class="ion-footer">
      <ion-item>
        <ion-label>Subtotal</ion-label>
        <ion-label slot="end">{{
          checkoutDetails.subTotal | currency
        }}</ion-label>
      </ion-item>
      <ion-item>
        <ion-label>Tax (13%)</ion-label>
        <ion-label slot="end">{{ checkoutDetails.tax | currency }}</ion-label>
      </ion-item>
      <ion-item>
        <ion-label>Total</ion-label>
        <ion-label slot="end">{{ checkoutDetails.total | currency }}</ion-label>
      </ion-item>
      <ion-button (click)="checkoutModal()" fill="solid" expand="full" color="dark" [disabled]="checkoutDetails.total===0">
        CheckOut
      </ion-button>
    </ion-footer>
  </ion-menu>
  }
  <div class="ion-page" id="main-content">
    <ion-router-outlet></ion-router-outlet>
  </div>
</ion-app>
